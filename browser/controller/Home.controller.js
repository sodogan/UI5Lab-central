sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library"],function(e,t,i,n,o){"use strict";return e.extend("ui5lab.browser.controller.Home",{onInit:function(){var e;e=new t({title:this.getResourceBundle().getText("homePanelTitle"),query:"",libraryRows:[],libraries:[]});this.setModel(e,"homeView");this.getRouter().getTarget("home").attachEventOnce("display",this._onHomeTargetMatched,this)},onSearch:function(e){var t=e?e.getParameter("newValue"):this.getModel("homeView").getProperty("/query"),o=this.byId("projects").getContent()[0];this.getModel("homeView").setProperty("/query",t);if(o.byId("table")){o.byId("table").getBinding("items").filter(new i("name",n.Contains,t))}else{o.byId("grid").getContent().forEach(function(e){e.getBinding("content").filter(new i("name",n.Contains,t))});setTimeout(function(){var e=false;o.byId("grid").getContent().forEach(function(t){if(t.getContent().length>0){e=true}});o.byId("nodata").setVisible(!e)},0)}},onSelect:function(e){var t=e.getParameter("key");this.byId("projects").removeAllContent();this.getRouter().getTarget("home"+t).display().then(function(){this.onSearch()}.bind(this))},onHelp:function(){o.URLHelper.redirect("https://ui5lab.io/docs/",true)},_onHomeTargetMatched:function(e){var t=arguments[0].getParameter("data")["?query"];if(this.byId("projects").getContent().length===0){this.getRouter().getTarget("homeGrid").display().then(function(){this.getOwnerComponent().samplesLoaded().then(this._fillLayout.bind(this),this._fillLayout.bind(this))}.bind(this))}},_fillLayout:function(){var e=this.getModel("homeView"),t=this.getModel();if(t){var i=t.getData().libraries,n=[],o=0,r=4;e.setProperty("/libraries",i);for(var a=0;a<i.length;a++){if(!n[o]){n[o]=[]}n[o].push(i[a]);if(a%r===r-1){o++}}e.setProperty("/libraryRows",n);e.setProperty("/title",this.getResourceBundle().getText("homePanelTitleCount",[t.getData().libraries.length]));var s=this.byId("projects").getContent()[0];s.byId("nodata").setVisible(n.length===0)}}})});