jQuery.sap.registerPreloadedModules({
	"version": "2.0",
	"name": "nabi.m.library-preload",
	"modules": {
		"nabi/m/ImageFileUploader.js": "/*!\n * ${copyright}\n */\nsap.ui.define([\"jquery.sap.global\",\"./library\",\"sap/ui/unified/FileUploader\",\"sap/ui/unified/FileUploaderRenderer\",\"sap/ui/Device\",\"nabi/m/thirdparty/canvas-to-blob\"],function(e,i,t,a,o,n){\"use strict\";var s=t.extend(\"nabi.m.ImageFileUploader\",{metadata:{library:\"nabi.m\",interfaces:[],properties:{scaleCondition:{type:\"nabi.m.ImageScaleCondition\",group:\"Data\",defaultValue:nabi.m.ImageScaleCondition.None},scaleConditionSize:{type:\"int\",group:\"Data\",defaultValue:3145728},scaleConditionResolution:{type:\"int\",group:\"Data\",defaultValue:1764e3},scaleConditionBoundaryWidth:{type:\"int\",group:\"Data\",defaultValue:1680},scaleConditionBoundaryHeight:{type:\"int\",group:\"Data\",defaultValue:1050},scaleType:{type:\"nabi.m.ImageScaleType\",group:\"Data\",defaultValue:nabi.m.ImageScaleType.Factor},scaleFactor:{type:\"float\",group:\"Data\",defaultValue:.9},scaledJpgQuality:{type:\"float\",group:\"Data\",defaultValue:1},maximumScaledFileSize:{type:\"int\",group:\"Data\",defaultValue:0},maximumBoundaryWidth:{type:\"int\",group:\"Data\",defaultValue:1680},maximumBoundaryHeight:{type:\"int\",group:\"Data\",defaultValue:1050},uploadType:{type:\"nabi.m.ImageType\",group:\"Data\",defaultValue:nabi.m.ImageType.Default}},aggregations:{},events:{maxScaledFileSizeExceed:{parameters:{fileName:{type:\"string\"},fileSize:{type:\"int\"}}},browserNotSupported:{parameters:{}}}},init:function(){this.isBrowserSupported()||(this.fireBrowserNotSupported(),e.sap.log.error(\"nabi.m.ImageFileUploader: Browser does not support File API and/or other important APIs. Sorry.\")),t.prototype.init.apply(this,arguments),t.prototype.setSendXHR.call(this,!0)},renderer:\"sap.ui.unified.FileUploaderRenderer\"});return s.prototype.upload=function(){t.prototype.upload.call(this,!0)},s.prototype.getProcessedBlobsFromArray=function(i){return new Promise(function(t,a){this._scaleFiles(i).then(function(i){var n,s,l,r;for(e.sap.log.debug(\"Images scaled successfully, now start upload...\"),l=[],n=0;n<i.length;n++){if(s=i[n],(r=this.getMaximumScaledFileSize())>0&&s.size>r)return e.sap.log.info(\"File: \"+s.name+\" is of size \"+s.size+\" bytes which exceeds the file size limit of \"+this.getMaximumScaledFileSize()+\" bytes.\"),this.fireMaxScaledFileSizeExceed({fileName:s.name,fileSize:s.size}),void a({reason:\"MaxScaledFileSizeExceed\",fileName:s.name,fileSize:s.size});o.browser.msie||o.browser.edge?l.push(s):s instanceof window.File?l.push(s):l.push(new File([s],s.name,{type:s.type}))}t(l)}.bind(this)).catch(function(){var i=\"File upload failed because on or more files could not be scaled!\";e.sap.log.error(i),a({reason:\"ImageScalingFailed\",message:i,args:arguments})})}.bind(this))},s.prototype.setSendXHR=function(){throw new Error(\"ImageFileUploader only supports upload via XHR requests (sendXHR is always true). Thus, the setter is obsolete.\")},t.getMetadata().isInstanceOf(\"sap.ui.unified.IProcessableBlobs\")&&(s.prototype.upload=function(){if(!this.getEnabled()||!window.File||!this.getValue())return void e.sap.log.debug(\"ImageFileUploader - Upload skipped because disabled\");this._bUploading=!0;var i=this.FUEl.files;this._scaleFiles(i).then(function(i){var t,a,n,s;try{for(e.sap.log.debug(\"Images scaled successfully, now start upload...\"),n=[],t=0;t<i.length;t++){if(a=i[t],(s=this.getMaximumScaledFileSize())>0&&a.size>s)return e.sap.log.info(\"File: \"+a.name+\" is of size \"+a.size+\" bytes which exceeds the file size limit of \"+this.getMaximumScaledFileSize()+\" bytes.\"),this.fireMaxScaledFileSizeExceed({fileName:a.name,fileSize:a.size}),void(this._bUploading=!1);o.browser.msie||o.browser.edge?n.push(a):a instanceof window.File?n.push(a):n.push(new File([a],a.name,{type:a.type}))}this._sendFilesWithXHR(n)}catch(i){e.sap.log.error(\"File upload failed:\\n\"+i.message),this._bUploading=!1}}.bind(this)).catch(function(){e.sap.log.error(\"File upload failed because on or more files could not be scaled!\")})}),s.prototype.exit=function(){t.prototype.exit.apply(this,arguments)},s.prototype.setScaleFactor=function(i){return e.isNumeric(i)&&i>0&&i<=1&&this.setProperty(\"scaleFactor\",i,!0),this},s.prototype._scaleFiles=function(e){var i,t;return i=[],t=this._getScaleConditionMatchedFunction().bind(this),new Promise(function(a,o){var n;for(n=0;n<e.length;n++)i.push(this._scaleFile(e[n],t));Promise.all(i).then(function(e){a(e)}).catch(function(){o(arguments)})}.bind(this))},s.prototype._getScaleConditionMatchedFunction=function(){var e;switch(this.getScaleCondition()){case nabi.m.ImageScaleCondition.Size:e=this._scaleConditionSizeMatched;break;case nabi.m.ImageScaleCondition.Resolution:e=this._scaleConditionResolutionMatched;break;case nabi.m.ImageScaleCondition.Boundary:e=this._scaleConditionBoundaryMatched;break;case nabi.m.ImageScaleCondition.Any:e=this._scaleConditionAnyPassed;break;case nabi.m.ImageScaleCondition.None:default:e=this._scaleConditionNoneMatched}return e},s.prototype._scaleConditionSizeMatched=function(e){return this.getScaleConditionSize()>0&&e.size>this.getScaleConditionSize()},s.prototype._scaleConditionResolutionMatched=function(e){return this.getScaleConditionResolution()>0&&e.width*e.height>this.getScaleConditionResolution()},s.prototype._scaleConditionBoundaryMatched=function(e){return this.getScaleConditionBoundaryWidth()>0&&e.width>this.getScaleConditionBoundaryWidth()||this.getScaleConditionBoundaryHeight()>0&&e.height>this.getScaleConditionBoundaryHeight()},s.prototype._scaleConditionAnyPassed=function(e){return this._scaleConditionSizeMatched(e)||this._scaleConditionResolutionMatched(e)||this._scaleConditionBoundaryMatched(ooParams)},s.prototype._scaleConditionNoneMatched=function(){return!0},s.prototype._scaleFile=function(e,i){var t=this;return new Promise(function(a,o){e.type.match(\"image/.*\")?t._imageToCanvas(e,i).then(function(i){var o=t._calculateFileProperties(e);i.toBlob(function(e){e.name=o.filename,a(e)},o.mimetype,o.quality)}).catch(function(i){i.success?a(e):o(i)}):a(e)})},s.prototype._imageToCanvas=function(e,i){return new Promise(function(t,a){var o=new Image;o.onload=function(){var n,s,l,r;if(!i({size:e.size,width:o.width,height:o.height}))return void a({success:!0,message:\"Scaling is skipped because no matching scaling condition found\",file:e});n=document.createElement(\"canvas\"),r=this.getScaleType(),r===nabi.m.ImageScaleType.Factor?(s=this.getScaleFactor(),n.width=o.width*s,n.height=o.height*s):r===nabi.m.ImageScaleType.Boundary&&(l=this._calculateBoundaries(o),n.width=l.width,n.height=l.height),n.ctx=n.getContext(\"2d\"),n.ctx.drawImage(o,0,0,n.width,n.height),t(n)}.bind(this),o.onerror=function(){o.onerror=null,a({success:!1,message:\"Failed to load the selected image from ObjectURL\",file:e})},o.src=URL.createObjectURL(e)}.bind(this))},s.prototype._calculateBoundaries=function(e){var i,t,a;if(i={height:e.height,width:e.width},this.getScaleType()!==nabi.m.ImageScaleType.Boundary)throw new Error(\"ImageFileUploader: boundaries can only be calculated for nabi.m.ImageScaleType.Boundary, but received nabi.m.ImageScaleType.\"+this.getScaleType());if(t=this.getMaximumBoundaryHeight(),a=this.getMaximumBoundaryWidth(),t<=0||a<=0)throw new Error(\"Invalid values for maximumBoundaryHeigth and/or maximumBoundaryWidth, both must be > 0\");return t&&e.height>t&&(i.width=e.width*(t/e.height),i.height=t),a&&e.width>a&&(i.height=i.height*(a/i.width),i.width=a),i},s.prototype._calculateFileProperties=function(e){var i,t,a;return i={filename:e.name,mimetype:e.type,quality:void 0},a=e.name.substr(e.name.lastIndexOf(\".\")+1).toLowerCase(),(t=this.getUploadType())===nabi.m.ImageType.Default?i:(t===nabi.m.ImageType.png?(i.filename=\"png\"===a?i.filename:i.filename+\".png\",i.mimetype=nabi.m.MimeType.PNG):t===nabi.m.ImageType.jpg&&(i.filename=\"jpg\"===a?i.filename:i.filename+\".jpg\",i.mimetype=nabi.m.MimeType.JPEG,i.quality=this.getScaledJpgQuality()),i)},s.prototype.isBrowserSupported=function(){return function(){var e=document.createElement(\"INPUT\");return e.type=\"file\",window.File&&\"files\"in e}()&&function(){var e=new XMLHttpRequest;return!!(e&&\"upload\"in e&&\"onprogress\"in e.upload)}()&&function(){return!!window.FormData}()},s},!0);",
		"nabi/m/library.js": "/*!\n * ${copyright}\n */\nsap.ui.define([\"jquery.sap.global\",\"sap/ui/core/library\"],function(e,a){\"use strict\";return sap.ui.getCore().initLibrary({name:\"nabi.m\",dependencies:[\"sap.ui.core\",\"sap.m\",\"sap.ui.unified\"],types:[],interfaces:[],controls:[\"nabi.m.PDFViewer\",\"nabi.m.ImageFileUploader\"],elements:[],noLibraryCSS:!1,version:\"0.3.0\"}),nabi.m.ImageType={jpg:\"jpg\",png:\"png\",Default:\"Default\"},nabi.m.ImageScaleType={Factor:\"Factor\",Boundary:\"Boundary\"},nabi.m.ImageScaleCondition={Size:\"Size\",Resolution:\"Resolution\",Boundary:\"Boundary\",Any:\"Any\",None:\"None\"},nabi.m.MimeType={PDF:\"application/pdf\",JPEG:\"image/jpeg\",PNG:\"image/png\"},nabi.m});",
		"nabi/m/PDFViewer.js": "/*!\n * ${copyright}\n */\nsap.ui.define([\"jquery.sap.global\",\"./library\",\"sap/ui/core/Control\"],function(t,e,i){\"use strict\";var r=i.extend(\"nabi.m.PDFViewer\",{metadata:{library:\"nabi.m\",properties:{height:{type:\"sap.ui.core.CSSSize\",group:\"Dimension\",defaultValue:\"100%\"},width:{type:\"sap.ui.core.CSSSize\",group:\"Dimension\",defaultValue:\"100%\"},source:{type:\"sap.ui.core.URI\",group:\"Misc\",defaultValue:null}},aggregations:{},events:{}},init:function(){}});return r.prototype.setWidth=function(t){this.setProperty(\"width\",t,!0);var e=this.$();return e&&e.attr(\"width\",t),this},r.prototype.setHeight=function(t){this.setProperty(\"height\",t,!0);var e=this.$();return e&&e.attr(\"height\",t),this},r});",
		"nabi/m/PDFViewerRenderer.js": "/*!\n * ${copyright}\n */\nsap.ui.define([\"jquery.sap.global\"],function(t){\"use strict\";var e,i;i=t.sap.getModulePath(\"nabi.m.thirdparty\"),e=i+\"/pdfjs/web/viewer.html\";var r={};return r.render=function(t,i){t.write(\"<iframe\"),t.writeControlData(i),t.addClass(\"nabiMPDFViewer\"),t.writeClasses(),t.writeAttribute(\"src\",e+\"?file=\"+i.getSource()),t.writeAttribute(\"height\",i.getHeight()),t.writeAttribute(\"width\",i.getWidth()),t.write(\"></iframe>\")},r},!0);",
		"nabi/m/messagebundle.properties": "# nothing needed yet\n"
	}
});