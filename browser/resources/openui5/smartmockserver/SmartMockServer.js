sap.ui.define(["sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/util/MockServer","openui5/smartmockserver/thirdparty/faker.min"],function(t,e,a){"use strict";const r=a;r.prototype._generateDataFromEntityOriginal=r.prototype._generateDataFromEntity;r.prototype.SAP_SEMANTICS_TO_FAKER_METHOD_MAPPING=[{sapSemantics:"city",fakerMethod:"address.city"},{sapSemantics:"country",fakerMethod:"address.country"},{sapSemantics:"geo-lat",fakerMethod:"address.latitude"},{sapSemantics:"geo-lon",fakerMethod:"address.longitude"},{sapSemantics:"region",fakerMethod:"address.state"},{sapSemantics:"street",fakerMethod:"address.streetAddress"},{sapSemantics:"zip",fakerMethod:"address.zipCode"},{sapSemantics:"org",fakerMethod:"company.companyName"},{sapSemantics:"currency-code",fakerMethod:"finance.currencyCode"},{sapSemantics:"photo",fakerMethod:"image.avatar"},{sapSemantics:"bcc",fakerMethod:"internet.email"},{sapSemantics:"cc",fakerMethod:"internet.email"},{sapSemantics:"email",fakerMethod:"internet.email"},{sapSemantics:"from",fakerMethod:"internet.email"},{sapSemantics:"sender",fakerMethod:"internet.email"},{sapSemantics:"to",fakerMethod:"internet.email"},{sapSemantics:"url",fakerMethod:"internet.url"},{sapSemantics:"body",fakerMethod:"lorem.paragraphs"},{sapSemantics:"subject",fakerMethod:"lorem.sentence"},{sapSemantics:"name",fakerMethod:"name.findName"},{sapSemantics:"givenname",fakerMethod:"name.firstName"},{sapSemantics:"middlename",fakerMethod:"name.firstName"},{sapSemantics:"title",fakerMethod:"name.jobTitle"},{sapSemantics:"familyname",fakerMethod:"name.lastName"},{sapSemantics:"honorific",fakerMethod:"name.prefix"},{sapSemantics:"suffix",fakerMethod:"name.suffix"},{sapSemantics:"tel",fakerMethod:"phone.phoneNumber"}];r.prototype._generateDataFromEntity=function(t,e,a){let n=r.prototype._generateDataFromEntityOriginal.apply(this,arguments);return this._generateDataWithSmartRules(t.name,n)};r.prototype._generateDataWithSmartRules=function(a,r){try{if(!this._smartRules){this._smartRules=[]}let n=e.extend(true,{},r);n=this._generateDataFromEntityWithSapSemanticsAnnotations(a,n);n=this._generateDataFromEntityWithSmartMockServerAnnotations(a,n);n=this._generateDataFromEntityWithSmartRules(a,n);return n}catch(e){t.error(e);return r}};r.prototype._generateDataFromEntityWithSmartRules=function(t,a){if(this._hasSmartRulesEntity(t)){const r=e.extend(true,{},a);Object.keys(r).forEach(function(e){if(this._hasSmartRulesEntityProperty(t,e)){r[e]=this._generatePropertyValueWithSmartRules(t,e)}}.bind(this));return r}else{return a}};r.prototype._getEntityPropertiesWithSapSemanticsAnnotations=function(t){const a='EntityType[Name="'+t+'"]';const r="Property[sap\\:semantics]";return e(this._oMetadata).find(a).find(r)};r.prototype._generateDataFromEntityWithSapSemanticsAnnotations=function(t,a){const r=this._getEntityPropertiesWithSapSemanticsAnnotations(t);if(r&&r.length&&r.length>0){const t=e.extend(true,{},a);r.each(function(a,r){const n=e(r);const i=this._getFakerMethodFromSapSemantics(n.attr("sap:semantics"));if(i){t[n.attr("Name")]=this._callFakerMethod(i)}}.bind(this));return t}else{return a}};r.prototype._getFakerMethodFromSapSemantics=function(t){const e=this.SAP_SEMANTICS_TO_FAKER_METHOD_MAPPING.find(function(e){return e.sapSemantics===t});if(e){return e.fakerMethod}else{return e}};r.prototype._getEntityPropertiesWithSmartMockServerAnnotations=function(t){const a='EntityType[Name="'+t+'"]';const r="Property[smartmockserver\\:rule]";return e(this._oMetadata).find(a).find(r)};r.prototype._generateDataFromEntityWithSmartMockServerAnnotations=function(t,a){const r=this._getEntityPropertiesWithSmartMockServerAnnotations(t);if(r&&r.length&&r.length>0){const t=e.extend(true,{},a);r.each(function(a,r){const n=e(r);const i=n.attr("smartmockserver:rule");if(i){t[n.attr("Name")]=this._callFakerMethod(i)}}.bind(this));return t}else{return a}};r.prototype._generatePropertyValueWithSmartRules=function(t,e){const a=this._getSmartRulesEntityProperty(t,e);return this._callFakerMethod(a.fakerMethod)};r.prototype._callFakerMethod=function(t){return faker.fake("{{"+t+"}}")};r.prototype._getSmartRulesEntity=function(t){return this._smartRules.find(function(e){return e.entityName===t})};r.prototype._getSmartRulesEntityProperty=function(t,e){const a=this._getSmartRulesEntity(t);if(!a){return a}return a.properties.find(function(t){return t.name===e})};r.prototype._hasSmartRulesEntity=function(t){return!!this._getSmartRulesEntity(t)};r.prototype._hasSmartRulesEntityProperty=function(t,e){return!!this._getSmartRulesEntityProperty(t,e)};r.prototype.setSmartRules=function(t){this._smartRules=t||[]};return r});